"use strict";(self.webpackChunk_frm_in=self.webpackChunk_frm_in||[]).push([[303],{6111:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(5621);function i(e){var t=e.className,n=e.stroke,i=void 0===n?2:n,r=e.size,a=void 0===r?14:r;return(0,s.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 30 30",children:[(0,s.jsx)("path",{className:"svg-icn",strokeWidth:i,d:"M13.83,6.32H6.11a2.19,2.19,0,0,0-2.2,2.19v15.3A2.19,2.19,0,0,0,6.11,26H21.55a2.19,2.19,0,0,0,2.2-2.19V16.16"}),(0,s.jsx)("path",{className:"svg-icn",strokeWidth:i,d:"M22.1,4.68a2.35,2.35,0,0,1,3.31,0,2.31,2.31,0,0,1,0,3.28L14.93,18.35l-4.41,1.09,1.11-4.37Z"})]})}},8537:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(5621);function i(e){var t=e.size,n=void 0===t?15:t,i=e.stroke,r=void 0===i?2:i;return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 30 30",children:[(0,s.jsx)("polyline",{className:"svg-icn",points:"4 7.68 6.44 7.68 26 7.68"}),(0,s.jsx)("path",{className:"svg-icn",strokeWidth:r,d:"M23.56,7.68V24.76a2.45,2.45,0,0,1-2.45,2.44H8.89a2.45,2.45,0,0,1-2.45-2.44V7.68m3.67,0V5.24A2.45,2.45,0,0,1,12.56,2.8h4.88a2.45,2.45,0,0,1,2.45,2.44V7.68"}),(0,s.jsx)("line",{className:"svg-icn",strokeWidth:r,x1:"12.56",y1:"13.78",x2:"12.56",y2:"21.1"}),(0,s.jsx)("line",{className:"svg-icn",strokeWidth:r,x1:"17.44",y1:"13.78",x2:"17.44",y2:"21.1"})]})}},303:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var s=n(6325),i=n(7953),r=n(6766),a=n(5569),o=n(4855),c=n(1945),l=n(6069),u=n(6111),d=n(5621);function h(e){var t=e.size,n=void 0===t?30:t,s=e.stroke,i=void 0===s?2:s;return(0,d.jsxs)("svg",{width:n,height:n,viewBox:"0 0 30 30",children:[(0,d.jsx)("ellipse",{className:"svg-icn",strokeWidth:i,strokeMiterlimit:"10",cx:"15",cy:"15",rx:"11",ry:"11.09"}),(0,d.jsx)("ellipse",{className:"svg-icn",strokeWidth:2,strokeMiterlimit:"10",cx:"15",cy:"11",rx:"1",ry:"1"}),(0,d.jsx)("line",{className:"svg-icn",strokeWidth:i-.5,strokeLinecap:"round",strokeLinejoin:"round",x1:"15",y1:"18",x2:"15",y2:"21.72"})]})}function f(e){var t=e.size;return(0,d.jsxs)("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 215 215",children:[(0,d.jsx)("rect",{className:"cls-1",fill:"none",strokeWidth:"16",stroke:"currentColor",strokeMiterlimit:"10",x:"19.91",y:"20.9",width:"174",height:"174",rx:"85"}),(0,d.jsx)("path",{fill:"currentColor",className:"cls-2",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"4",d:"M138.3,151.06,99.23,113.52a6,6,0,0,1-1.85-4.34V56.47a6,6,0,0,1,6-6h0a6,6,0,0,1,6,6v47.59a6,6,0,0,0,1.85,4.33l35.37,34a6,6,0,0,1,.17,8.51h0A6,6,0,0,1,138.3,151.06Z"})]})}var m=n(8537);function x(e){var t=(0,i.useRef)(null),n=(0,i.useRef)(null),s=(0,i.useState)(!1),r=s[0],o=s[1],c=function(e){r&&t.current&&!t.current.contains(e.target)&&o(!1),document.removeEventListener("click",c)};return(0,i.useEffect)((function(){n.current.parentNode.parentNode.parentNode.style.zIndex=r?"10":"auto",r||n.current.blur(),document.addEventListener("click",c)}),[r]),(0,d.jsxs)("div",{className:"btcd-menu",children:[(0,d.jsx)("button",{ref:n,className:"btcd-menu-btn btcd-mnu sh-sm",onClick:function(){return o((function(e){return!e}))},"aria-label":"toggle menu",type:"button"}),(0,d.jsxs)("div",{ref:t,className:"btcd-menu-list "+(r?"btcd-m-a":""),children:[(0,d.jsxs)(a.N_,{to:"/flow/action/info/"+e.id+"/"+e.name,type:"button",className:"flx","aria-label":"actions",children:[(0,d.jsx)(h,{size:16}),"  Info"]}),(0,d.jsxs)(a.N_,{to:"/flow/action/log/"+e.id+"/"+e.name,type:"button",className:"flx","aria-label":"actions",children:[(0,d.jsx)(f,{size:16}),"  Timeline"]}),(0,d.jsxs)(a.N_,{to:"/flow/action/edit/"+e.id,type:"button",className:"flx","aria-label":"actions",children:[(0,d.jsx)(u.A,{size:16}),"  Edit"]}),(0,d.jsxs)("button",{type:"button","aria-label":"actions",className:"flx",onClick:e.dup,children:[(0,d.jsx)(l.A,{size:16}),"  Clone"]}),(0,d.jsxs)("button",{type:"button","aria-label":"actions",className:"flx",onClick:e.del,children:[(0,d.jsx)(m.A,{size:16}),"  Delete"]})]})]})}var g=n(9455),b=n(8386),w=n(8075),v=n(8291),_=n(8450),j=n(3156),y=n(8496),N=n(7830),k=(0,i.lazy)((function(){return n.e(635).then(n.bind(n,5635))}));function p(){var e,t=(0,j.A)({payload:{},action:"flow/list",method:"get"}),n=t.data,l=t.isLoading,u=(0,i.useState)(!l&&n.success&&null!=n&&null!=(e=n.data)&&e.integrations?n.data.integrations:[]),h=u[0],f=u[1],m=(0,i.useState)({show:!1}),p=m[0],A=m[1],C=(0,i.useState)({show:!1,btnTxt:""}),W=C[0],S=C[1],z=(0,i.useState)({show:!1,msg:""}),T=z[0],I=z[1],H=(0,i.useState)([{width:250,minWidth:80,Header:(0,N.__)("Trigger"),accessor:"triggered_entity"},{width:250,minWidth:80,Header:(0,N.__)("Action Name"),accessor:"name"},{width:200,minWidth:200,Header:(0,N.__)("Created At"),accessor:"created_at"},{width:70,minWidth:60,Header:(0,N.__)("Status"),accessor:"status",Cell:function(e){return(0,d.jsx)(b.A,{className:"flx",action:function(t){return M(t,e.row.original.id)},checked:1===Number(e.row.original.status)})}}]),E=H[0],L=H[1];console.log("isLoading, data",l,n),(0,i.useEffect)((function(){var e;!l&&n.success&&(null==n||null==(e=n.data)?void 0:e.integrations)&&f(n.data.integrations)}),[n]),(0,i.useEffect)((function(){var e=E.filter((function(e){return"t_action"!==e.accessor&&"status"!==e.accessor}));e.push({width:70,minWidth:60,Header:(0,N.__)("Status"),accessor:"status",Cell:function(e){return(0,d.jsx)(b.A,{className:"flx",action:function(t){return M(t,e.row.original.id)},checked:1===Number(e.row.original.status)})}}),e.push({sticky:"right",width:100,minWidth:60,Header:"Actions",accessor:"t_action",Cell:function(e){return(0,d.jsx)(x,{id:e.row.original.id,name:e.row.original.name,index:e.row.id,del:function(){return O(e.row.original.id,e.row.index)},dup:function(){return F(e.row.original.id,e.row.index)}})}}),L([].concat(e))}),[h]);var M=function(e,t){var n=e.target.checked,s=[].concat(h);s.find((function(e){return e.id===t})).status=!0===n?"1":"0",f(s);var i={id:t,status:n};(0,y.A)(i,"flow/toggleStatus").then((function(e){r.Ay.success((0,N.__)(e.data))})).catch((function(){r.Ay.error((0,N.__)("Something went wrong"))}))},B=(0,i.useCallback)((function(e){for(var t=[],n=[],s=0;s<e.length;s+=1)t.push(e[s].id),n.push(e[s].original.id);var i=(0,y.A)({flowID:n},"flow/bulk-delete").then((function(e){if(e.success){for(var n=[].concat(h),s=t.length-1;s>=0;s-=1)n.splice(Number(t[s]),1);return f(n),"Integration Deleted Successfully"}return e.data}));r.Ay.promise(i,{success:function(e){return e},error:(0,N.__)("Error Occurred"),loading:(0,N.__)("delete...")})}),[h]),V=(0,i.useCallback)((function(e){L(e)}),[]),D=function(){W.show=!1,S((0,s.A)({},W))},O=function(e,t){W.action=function(){!function(e,t){var n=(0,y.A)({id:e},"flow/delete").then((function(e){if(e.success){var n=[].concat(h);return n.splice(t,1),f(n),"Integration deleted successfully"}return e.data}));r.Ay.promise(n,{success:function(e){return e},error:(0,N.__)("Error Occurred"),loading:(0,N.__)("delete...")})}(e,t),D()},W.btnTxt=(0,N.__)("Delete"),W.btn2Txt=null,W.btnClass="",W.body=(0,N.__)("Are you sure to delete this Integration?"),W.show=!0,S((0,s.A)({},W))},F=function(e){W.action=function(){!function(e){var t=(0,y.A)({id:e},"flow/clone").then((function(t){if(t.success){var n=t.data,s=[].concat(h),i=s.find((function(t){return t.id===e})),r={id:n.id,name:"duplicate of "+i.name,triggered_entity:i.triggered_entity,status:i.status,created_at:n.created_at};return s.push(r),f(s),"Integration clone successfully"}return t.data}));r.Ay.promise(t,{success:function(e){return e},error:(0,N.__)("Error Occurred"),loading:(0,N.__)("cloning...")})}(e),D()},W.btnTxt=(0,N.__)("Clone"),W.btn2Txt=null,W.btnClass="blue",W.body=(0,N.__)("Are you sure to clone this Integration ?"),W.show=!0,S((0,s.A)({},W))};return l?(0,d.jsx)(o.default,{style:{display:"flex",height:"82vh",justifyContent:"center",alignItems:"center"}}):(0,d.jsxs)("div",{id:"all-forms",children:[(0,d.jsx)(w.A,{snack:p,setSnackbar:A}),(0,d.jsx)(c.A,{show:W.show,body:W.body,action:W.action,close:D,btnTxt:W.btnTxt,btn2Txt:W.btn2Txt,btn2Action:W.btn2Action,btnClass:W.btnClass}),h&&null!=h&&h.length?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"af-header flx flx-between",children:[(0,d.jsx)("h2",{children:(0,N.__)("Integrations")}),(0,d.jsx)(a.N_,{to:"/flow/new",className:"btn round btcd-btn-lg blue blue-sh",children:(0,N.__)("Create Integration")})]}),(0,d.jsx)("div",{className:"forms",children:(0,d.jsx)(v.A,{className:"f-table btcd-all-frm",height:500,columns:E,data:h,rowSeletable:!0,resizable:!0,columnHidable:!0,setTableCols:V,setBulkDelete:B,search:!0})})]}):(0,d.jsx)(k,{}),(0,d.jsxs)(g.A,{sm:!0,show:T.show,setModal:function(){return I({show:!1})},title:(0,N.__)("Premium Feature"),className:"pro-modal",children:[(0,d.jsx)("h4",{className:"txt-center mt-5",children:T.msg}),(0,d.jsx)("div",{className:"txt-center",children:(0,d.jsx)("a",{href:_.nv,target:"_blank",rel:"noreferrer",children:(0,d.jsx)("button",{className:"btn btn-lg blue",type:"button",children:(0,N.__)("Buy Premium")})})})]})]})}const A=(0,i.memo)(p)}}]);