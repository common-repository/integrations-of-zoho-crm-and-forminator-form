"use strict";(self.webpackChunk_frm_in=self.webpackChunk_frm_in||[]).push([[113,209],{7209:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var a=n(6325),i=n(7953),s=n(6766),l=n(4143),o=n(7741),r=n(8496),d=n(7830),c=n(5621);const u=function(e){e.setSnackbar;var t=e.className,n=void 0===t?"":t,u=(0,i.useState)([]),f=u[0],m=u[1],h=(0,i.useState)([]),b=h[0],g=h[1],v=(0,l.L4)(o.Nb),_=v[0],x=v[1],j=(0,l.lZ)(o.sr);return(0,i.useEffect)((function(){(0,r.A)({},_.triggered_entity.toLowerCase()+"/get",null,"GET").then((function(e){if(e.success){var t;m(e.data);var n={};null==(t=e.data)||t.map((function(e){n[e.id]=e.post_id})),g(n)}}))}),[]),(0,c.jsxs)("div",{className:""+(n||"flx"),children:[(0,c.jsx)("b",{className:"wdt-200 d-in-b",children:(0,d.__)(" Form/Task Name ")}),(0,c.jsxs)("select",{name:"triggered_entity_id",value:_.triggered_entity_id,onChange:function(e){var t=(0,a.A)({},_),n=e.target,i=n.name,l=n.value;t[i]=l,x(t);var o,c={id:l};"Elementor"===_.triggered_entity&&(c=(0,a.A)({},c,{postId:null!=(o=b[l])?o:_.flow_details.postId}));var u=(0,r.A)(c,_.triggered_entity.toLowerCase()+"/get/form").then((function(e){return e.success&&j(e.data.fields),e.data}));s.Ay.promise(u,{success:(0,d.__)("Form fields Refresh successfully"),error:(0,d.__)("Error Occurred"),loading:(0,d.__)("Loading Form Fields...")})},className:"btcd-paper-inp w-7 "+n,children:[(0,c.jsx)("option",{value:"",children:(0,d.__)("Select Form")}),null==f?void 0:f.map((function(e){return(0,c.jsx)("option",{value:e.id,children:e.title},e.id)}))]})]})}},7079:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(7953),i=n(4143),s=n(7741),l=n(8496),o=n(5665),r=n(7830),d=n(8311),c=n(5596),u=n(5621);const f=function(e){var t,n=e.setSnackbar,f=(0,i.L4)(s.Nb),m=f[0],h=f[1],b=(0,i.lZ)(s.sr),g=(0,a.useState)(!1),v=g[0],_=g[1],x=(0,i.vc)(s.pB).api,j=m.triggered_entity_id;return(0,u.jsxs)("div",{className:"flx mt-3",children:[(0,u.jsx)("b",{className:"wdt-200 d-in-b",children:(0,r.__)("Webhook URL:","bit-integrations")}),(0,u.jsxs)("div",{className:"w-5",children:[(0,u.jsx)(c.A,{value:x.base+"/callback/"+j,className:"field-key-cpy w-10 ml-0",setSnackbar:n,readOnly:!0}),(0,u.jsxs)("button",{onClick:function(){_(!0);var e=setInterval((function(){(0,l.A)({hook_id:j},"webhook/test").then((function(t){if(t.success){clearInterval(e);var n=t.data.webhook;"object"===typeof t.data.webhook&&(n=Object.keys(t.data.webhook).map((function(e){return{name:e,label:t.data.webhook[e]+"-"+e,type:"text"}}))),b(n);var a=(0,o.A4)(m);a.flow_details.fields=n,h(a),(0,l.A)({hook_id:j},"webhook/test/remove"),_(!1)}}))}),1500)},className:"btn btcd-btn-lg green sh-sm flx mt-1 ml-1",type:"button",children:[null!=(t=m.triggerDetail)&&t.data?(0,r.__)("Fetched ✔","bit-integrations"):(0,r.__)("Fetch","bit-integrations"),v&&(0,u.jsx)(d.A,{size:"20",clr:"#022217",className:"ml-2"})]})]})]})}},8880:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var a=n(6325),i=n(7953),s=n(7830),l=n(6363),o=n(8311),r=n(8127),d=n(5621);function c(e){var t,n,c,u,f=e.step,m=e.saveConfig,h=e.edit,b=e.disabled,g=e.isLoading,v=e.dataConf,_=void 0===v?null:v,x=e.setDataConf,j=void 0===x?null:x,p=e.formFields,k=void 0===p?[]:p;(0,i.useEffect)((function(){if(_&&(null==_||!_.condition)){var e=(0,a.A)({},_);e.condition={action_behavior:"",actions:[{field:"",action:"value"}],logics:[{field:"",logic:"",val:""},"or",{field:"",logic:"",val:""}]},j(e)}}),[]);var N=function(e,t){var n=(0,a.A)({},_);n.condition.action_behavior=t?e:"",j(n)};return(0,d.jsxs)("div",{children:[(null==_?void 0:_.condition)&&h&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"flx",children:(0,d.jsx)(r.A,{onChange:function(e){return N(e.target.value,e.target.checked)},checked:"cond"===(null==_||null==(t=_.condition)?void 0:t.action_behavior),className:"wdt-200 mt-4 mr-2",value:"cond",title:(0,s.__)("Conditional Logics","bit_integration")})}),(0,d.jsx)("br",{}),"cond"===(null==_||null==(n=_.condition)?void 0:n.action_behavior)&&(0,d.jsx)(l.A,{formFields:k,dataConf:_,setDataConf:j})]}),(null==_?void 0:_.condition)&&2===f&&!h&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"flx pl-2",children:(0,d.jsx)(r.A,{onChange:function(e){return N(e.target.value,e.target.checked)},checked:"cond"===(null==_||null==(c=_.condition)?void 0:c.action_behavior),className:"wdt-200 mt-4 mr-2",value:"cond",title:(0,s.__)("Conditional Logics","bit_integration")})}),(0,d.jsx)("br",{}),"cond"===(null==_||null==(u=_.condition)?void 0:u.action_behavior)&&(0,d.jsx)(l.A,{formFields:k,dataConf:_,setDataConf:j})]}),h?(0,d.jsx)("div",{className:"txt-center w-9 mt-3",children:(0,d.jsxs)("button",{onClick:m,className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:g||b,children:[(0,s.__)("Update"),g&&(0,d.jsx)(o.A,{size:20,clr:"#022217",className:"ml-2"})]})}):(0,d.jsxs)("div",{className:"btcd-stp-page txt-center",style:{width:3===f&&"100%",height:3===f&&"auto"},children:[(0,d.jsx)("h2",{className:"ml-3",children:(0,s.__)("Successfully Integrated")}),(0,d.jsxs)("button",{onClick:m,className:"btn btcd-btn-lg green sh-sm",type:"button",disabled:g,children:[(0,s.__)("Finish & Save "),"✔",g&&(0,d.jsx)(o.A,{size:20,clr:"#022217",className:"ml-2"})]})]})]})}},113:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var a=n(7953),i=n(5926),s=n(4143),l=n(7741),o=n(7830),r=n(8075),d=n(7209),c=n(5467),u=n(7079),f=n(8880),m=n(9192),h=n(416),b=n(5621);const g=function(e){var t=e.allIntegURL,n=(0,i.W6)(),g=(0,i.g)().id,v=(0,s.L4)(l.J1),_=v[0],x=v[1],j=(0,s.L4)(l.Nb),p=j[0],k=j[1],N=(0,a.useState)(!1),w=N[0],y=N[1],C=(0,a.useState)({show:!1}),A=C[0],F=C[1],I=(0,a.useState)(0),L=I[0],S=I[1],E=(0,s.vc)(l.sr);return(0,b.jsxs)("div",{style:{width:900},children:[(0,b.jsx)(r.A,{snack:A,setSnackbar:F}),(0,b.jsxs)("div",{className:"flx mt-3",children:[(0,b.jsx)("b",{className:"wdt-200 ",children:(0,o.__)("Integration Name:","bit-integrations")}),(0,b.jsx)("input",{className:"btcd-paper-inp w-5",onChange:function(e){return(0,m.handleInput)(e,L,_,x)},name:"name",value:_.name,type:"text",placeholder:(0,o.__)("Integration Name...","bit-integrations")})]}),(0,b.jsx)("br",{}),!(0,c.checkWebhookIntegrationsExist)(p.triggered_entity)&&(0,b.jsx)(d.default,{setSnackbar:F}),(0,c.checkWebhookIntegrationsExist)(p.triggered_entity)&&(0,b.jsx)(u.default,{setSnackbar:F}),(0,b.jsx)(h.default,{tab:L,settab:S,formID:p.triggered_entity_id,formFields:E,handleInput:function(e){return(0,m.handleInput)(e,L,_,x,y,F)},crmConf:_,setCrmConf:x,isLoading:w,setIsLoading:y,setSnackbar:F}),(0,b.jsx)(f.default,{edit:!0,saveConfig:function(){(0,m.checkMappedFields)(_)?(0,c.saveActionConf)({flow:p,setFlow:k,allIntegURL:t,conf:_,history:n,id:g,edit:1,setIsLoading:y,setSnackbar:F}):F({show:!0,msg:(0,o.__)("Please map mandatory fields","bit-integrations")})},disabled:""===_.module||""===_.layout||_.field_map.length<1,isLoading:w,dataConf:_,setDataConf:x,formFields:E}),(0,b.jsx)("br",{})]})}}}]);