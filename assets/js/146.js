"use strict";(self.webpackChunk_frm_in=self.webpackChunk_frm_in||[]).push([[146,192],{6111:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(5621);function l(e){var t=e.className,s=e.stroke,l=void 0===s?2:s,i=e.size,n=void 0===i?14:i;return(0,a.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 30 30",children:[(0,a.jsx)("path",{className:"svg-icn",strokeWidth:l,d:"M13.83,6.32H6.11a2.19,2.19,0,0,0-2.2,2.19v15.3A2.19,2.19,0,0,0,6.11,26H21.55a2.19,2.19,0,0,0,2.2-2.19V16.16"}),(0,a.jsx)("path",{className:"svg-icn",strokeWidth:l,d:"M22.1,4.68a2.35,2.35,0,0,1,3.31,0,2.31,2.31,0,0,1,0,3.28L14.93,18.35l-4.41,1.09,1.11-4.37Z"})]})}},6146:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(6325),l=s(7953),i=s(5774),n=s(8420),r=(s(9101),s(7830)),o=s(1945),d=s(5621);const c=function(e){var t=e.className,s=e.disabled,a=e.checked,l=e.onChange,i=e.radio,n=e.name,r=e.title,o=e.value,c=e.sqr;return(0,d.jsxs)("label",{className:"btcd-ck-wrp "+t,children:[r,(0,d.jsx)("input",{type:i?"radio":"checkbox",checked:a,onChange:l,name:n,value:o,disabled:s}),(0,d.jsx)("span",{className:"btcd-mrk "+(!c&&"br-50")+" "+(i?"rdo":"ck")})]})};var u=s(8127),m=s(4855),f=s(9455),h=s(6111);function g(e){var t=e.action,s=e.children;return(0,d.jsxs)("div",{className:"action-btn-wrapper",children:[(0,d.jsx)("div",{className:"action-btn",tabIndex:"0",role:"button",onClick:t,onKeyPress:t,children:(0,d.jsx)(h.A,{})}),s]})}var _=s(9192);function p(e){var t,s,h,p,b,v,w,x,k,y,F,j,A,C=e.crmConf,N=e.setCrmConf,R=e.formFields,D=e.tab,O=e.formID,M=e.setSnackbar,T=(0,l.useState)(!1),z=T[0],I=T[1],S=(0,l.useState)(!1),U=S[0],q=S[1],L=(0,l.useState)({show:!1,action:function(){}}),Z=L[0],P=L[1],W="undefined"!==typeof btcbi&&btcbi.isPro,B=function(e,t){var s=(0,a.A)({},C);if(0===D){if("attachment"===t&&(""!==e?s.actions.attachment=e:delete s.actions.attachment),"approval"===t&&(e.target.checked?s.actions.approval=!0:delete s.actions.approval),"workflow"===t&&(e.target.checked?s.actions.workflow=!0:delete s.actions.workflow),"blueprint"===t&&(e.target.checked?s.actions.blueprint=!0:delete s.actions.blueprint),"gclid"===t&&(e.target.checked?s.actions.gclid=!0:delete s.actions.gclid),"assignment_rules"===t&&(""!==e?s.actions.assignment_rules=e:delete s.actions.assignment_rules),"tag_rec"===t&&(""!==e?s.actions.tag_rec=e:delete s.actions.tag_rec),"rec_owner"===t&&(""!==e?s.actions.rec_owner=e:delete s.actions.rec_owner),"upsert"===t)if(e.target.checked){var l,i=null==(l=s.default.layouts[s.module][s.layout].unique)?void 0:l.map((function(e,t){return{i:t,name:e}}));s.actions.upsert={overwrite:!0,crmField:i}}else delete s.actions.upsert}else if("attachment"===t&&(""!==e?s.relatedlists[D-1].actions.attachment=e:delete s.relatedlists[D-1].actions.attachment),"approval"===t&&(e.target.checked?s.relatedlists[D-1].actions.approval=!0:delete s.relatedlists[D-1].actions.approval),"workflow"===t&&(e.target.checked?s.relatedlists[D-1].actions.workflow=!0:delete s.relatedlists[D-1].actions.workflow),"blueprint"===t&&(e.target.checked?s.relatedlists[D-1].actions.blueprint=!0:delete s.relatedlists[D-1].actions.blueprint),"gclid"===t&&(e.target.checked?s.relatedlists[D-1].actions.gclid=!0:delete s.relatedlists[D-1].actions.gclid),"assignment_rules"===t&&(""!==e?s.relatedlists[D-1].actions.assignment_rules=e:delete s.relatedlists[D-1].actions.assignment_rules),"tag_rec"===t&&(""!==e?s.relatedlists[D-1].actions.tag_rec=e:delete s.relatedlists[D-1].actions.tag_rec),"rec_owner"===t&&(""!==e?s.relatedlists[D-1].actions.rec_owner=e:delete s.relatedlists[D-1].actions.rec_owner),"upsert"===t)if(e.target.checked){var n,r=null==(n=s.default.layouts[s.relatedlists[D-1].module][s.relatedlists[D-1].layout].unique)?void 0:n.map((function(e,t){return{i:t,name:e}}));s.relatedlists[D-1].actions.upsert={overwrite:!0,crmField:r}}else delete s.relatedlists[D-1].actions.upsert;N((0,a.A)({},s))},V=function(){P({show:!1})},G=0===D?C.module:C.relatedlists[D-1].module,H=function(e,t){var s=(0,a.A)({},C);0===D?("list"===t&&(s.actions.upsert.crmField=e),"overwrite"===t&&(s.actions.upsert.overwrite=e)):("list"===t&&(s.relatedlists[D-1].actions.upsert.crmField=e),"overwrite"===t&&(s.relatedlists[D-1].actions.upsert.overwrite=e)),N((0,a.A)({},s))};return(0,d.jsxs)("div",{className:"pos-rel",children:[!W&&(0,d.jsx)("div",{className:"pro-blur flx w-10",style:{top:-25},children:(0,d.jsxs)("div",{className:"pro",children:[(0,r.__)("Available On","bit-integrations"),(0,d.jsx)("a",{href:"https://formsintegrations.com/forminator-forms-integration-with-zoho-crm/",target:"_blank",rel:"noreferrer",children:(0,d.jsxs)("span",{className:"txt-pro",children:[" ",(0,r.__)("Premium","bit-integrations")]})})]})}),(0,d.jsxs)("div",{className:"d-flx flx-wrp",children:[(0,d.jsx)(u.A,{onChange:function(e){return B(e,"workflow")},checked:0===D?"workflow"in C.actions:"workflow"in C.relatedlists[D-1].actions,className:"wdt-200 mt-4 mr-2",value:"Workflow",title:(0,r.__)("Workflow","bit-integrations"),subTitle:(0,r.__)("Trigger CRM workflows","bit-integrations")}),(0,d.jsx)(u.A,{onChange:function(){return P({show:"attachment"})},checked:0===D?"attachment"in C.actions:"attachment"in C.relatedlists[D-1].actions,className:"wdt-200 mt-4 mr-2",value:"Attachment",title:(0,r.__)("Attachment","bit-integrations"),subTitle:(0,r.__)("Add attachments or signatures from BitForm to CRM.","bit-integrations")}),(0,d.jsx)(u.A,{onChange:function(e){return B(e,"approval")},checked:0===D?"approval"in C.actions:"approval"in C.relatedlists[D-1].actions,className:"wdt-200 mt-4 mr-2",value:"Approval",title:(0,r.__)("Approval","bit-integrations"),subTitle:(0,r.__)("Send entries to CRM approval list.","bit-integrations")}),(0,d.jsx)(u.A,{onChange:function(e){return B(e,"blueprint")},checked:0===D?"blueprint"in C.actions:"blueprint"in C.relatedlists[D-1].actions,className:"wdt-200 mt-4 mr-2",value:"Blueprint",title:(0,r.__)("Blueprint","bit-integrations"),subTitle:(0,r.__)("Trigger CRM Blueprint","bit-integrations")}),(0,d.jsx)(u.A,{onChange:function(e){return B(e,"gclid")},checked:0===D?"gclid"in C.actions:"gclid"in C.relatedlists[D-1].actions,className:"wdt-200 mt-4 mr-2",value:"Capture_GCLID",title:(0,r.__)("Capture GCLID","bit-integrations"),subTitle:(0,r.__)("Sends the click details of AdWords Ads to Zoho CRM.","bit-integrations")}),(0,d.jsx)(g,{action:function(){var e,t;if(!D||null!=(e=C.relatedlists[D-1].actions.upsert)&&e.crmField){if(null==(t=C.actions.upsert)||!t.crmField){var s,l=(0,a.A)({},C),i=null==(s=l.default.layouts[l.module][l.layout].unique)?void 0:s.map((function(e,t){return{i:t,name:e}}));l.actions.upsert={overwrite:!0,crmField:i},N((0,a.A)({},l))}}else{var n,r=(0,a.A)({},C),o=null==(n=r.default.layouts[r.relatedlists[D-1].module][r.relatedlists[D-1].layout].unique)?void 0:n.map((function(e,t){return{i:t,name:e}}));r.relatedlists[D-1].actions.upsert={overwrite:!0,crmField:o},N(r)}I(!0)},children:(0,d.jsx)(u.A,{onChange:function(e){return B(e,"upsert")},checked:0===D?"upsert"in C.actions:"upsert"in C.relatedlists[D-1].actions,className:"wdt-200 mt-4 mr-2",value:"Upsert_Record",title:(0,r.__)("Upsert Records","bit-integrations"),subTitle:(0,r.__)("The record is updated if it already exists else it is inserted as a new record.","bit-integrations")})}),(0,d.jsx)(u.A,{onChange:function(){var e;null!=C&&null!=(e=C.default)&&null!=(e=e.assignmentRules)&&e[G]||(0,_.refreshAssigmentRules)(D,C,N,q,M),P({show:"assignment_rules"})},checked:0===D?"assignment_rules"in C.actions:"assignment_rules"in C.relatedlists[D-1].actions,className:"wdt-200 mt-4 mr-2",value:"Assignment_Rule",title:(0,r.__)("Assignment Rules","bit-integrations"),subTitle:(0,r.__)("Trigger Assignment Rules in Zoho CRM.","bit-integrations")}),(0,d.jsx)(u.A,{onChange:function(){return P({show:"tag_rec"})},checked:0===D?"tag_rec"in C.actions:"tag_rec"in C.relatedlists[D-1].actions,className:"wdt-200 mt-4 mr-2",value:"Tag_Records",title:(0,r.__)("Tag Records","bit-integrations"),subTitle:(0,r.__)("Add a tag to records pushed to Zoho CRM.","bit-integrations")}),(0,d.jsx)(u.A,{onChange:function(){var e;null!=(e=C.default)&&e.crmOwner||(0,_.refreshOwners)(O,C,N,q,M),P({show:"rec_owner"})},checked:0===D?"rec_owner"in C.actions:"rec_owner"in C.relatedlists[D-1].actions,className:"wdt-200 mt-4 mr-2",value:"Record_Owner",title:(0,r.__)("Record Owner","bit-integrations"),subTitle:(0,r.__)("Add a owner to records pushed to Zoho CRM.","bit-integrations")})]}),(0,d.jsxs)(o.A,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:(0,r.__)("Ok","bit-integrations"),show:"attachment"===Z.show,close:V,action:V,title:(0,r.__)("Select Attachment","bit-integrations"),children:[(0,d.jsx)("div",{className:"btcd-hr mt-2"}),(0,d.jsx)("div",{className:"mt-2",children:(0,r.__)("Select file upload fields","bit-integrations")}),(0,d.jsx)(i.A,{defaultValue:0===D?C.actions.attachment:C.relatedlists[D-1].actions.attachment,className:"mt-2 w-9",onChange:function(e){return B(e,"attachment")},options:R.filter((function(e){return"file"===e.type})).map((function(e){return{label:e.label,value:e.name}}))})]}),(0,d.jsxs)(o.A,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:(0,r.__)("Ok","bit-integrations"),show:"assignment_rules"===Z.show,close:V,action:V,title:(0,r.__)("Assignment Rules","bit-integrations"),children:[(0,d.jsx)("div",{className:"btcd-hr mt-2"}),(0,d.jsx)("div",{className:"mt-2",children:(0,r.__)("Assignment Rules","bit-integrations")}),U?(0,d.jsx)(m.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):(0,d.jsxs)("div",{className:"flx flx-between mt-2",children:[(0,d.jsxs)("select",{value:0===D?C.actions.assignment_rules:C.relatedlists[D-1].actions.assignment_rules,className:"btcd-paper-inp",onChange:function(e){return B(e.target.value,"assignment_rules")},children:[(0,d.jsx)("option",{value:"",children:(0,r.__)("Select Assignment Rule","bit-integrations")}),(null==C||null==(t=C.default)||null==(t=t.assignmentRules)?void 0:t[G])&&Object.keys(C.default.assignmentRules[G]).map((function(e){return(0,d.jsx)("option",{value:C.default.assignmentRules[G][e],children:e},e)}))]}),(0,d.jsx)("button",{onClick:function(){return(0,_.refreshAssigmentRules)(D,C,N,q,M)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,r.__)("Refresh CRM Assignment Rules","bit-integrations")+"'"},type:"button",disabled:U,children:"↻"})]})]}),(0,d.jsxs)(o.A,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:(0,r.__)("Ok","bit-integrations"),show:"tag_rec"===Z.show,close:V,action:V,title:(0,r.__)("Tag Records","bit-integrations"),children:[(0,d.jsx)("div",{className:"btcd-hr mt-2 mb-2"}),(0,d.jsx)("small",{children:(0,r.__)("Add a tag to records pushed to Zoho CRM","bit-integrations")}),(0,d.jsx)("div",{className:"mt-2",children:(0,r.__)("Tag Name","bit-integrations")}),U?(0,d.jsx)(m.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):(0,d.jsxs)("div",{className:"flx flx-between mt-2",children:[(0,d.jsx)(i.A,{className:"msl-wrp-options",defaultValue:0===D?C.actions.tag_rec:C.relatedlists[D-1].actions.tag_rec,options:function(){var e,t,s=[{title:"Zoho CRM Tags",type:"group",childs:[]},{title:"Form Fields",type:"group",childs:[]}];null!=(e=C.default.tags)&&e[G]&&(s[0].childs=Object.values(null==(t=C.default.tags)?void 0:t[G]).map((function(e){return{label:e,value:e}})));return s[1].childs=R.map((function(e){return{label:e.label,value:"${"+e.name+"}"}})),s}(),onChange:function(e){return B(e,"tag_rec")},customValue:!0}),(0,d.jsx)("button",{onClick:function(){return(0,_.refreshTags)(D,O,C,N,q,M)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":(0,r.__)("Refresh CRM Tags","bit-integrations")+"'"},type:"button",disabled:U,children:"↻"})]})]}),(0,d.jsxs)(o.A,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:(0,r.__)("Ok","bit-integrations"),show:"rec_owner"===Z.show,close:V,action:V,title:(0,r.__)("Record Owner","bit-integrations"),children:[(0,d.jsx)("div",{className:"btcd-hr mt-2"}),(0,d.jsx)("div",{className:"mt-2",children:(0,r.__)("Owner Name","bit-integrations")}),U?(0,d.jsx)(m.default,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):(0,d.jsxs)("div",{className:"flx flx-between mt-2",children:[(0,d.jsxs)("select",{value:0===D?C.actions.rec_owner:C.relatedlists[D-1].actions.rec_owner,className:"btcd-paper-inp",onChange:function(e){return B(e.target.value,"rec_owner")},children:[(0,d.jsx)("option",{value:"",children:(0,r.__)("Select Owner","bit-integrations")}),(null==(s=C.default)?void 0:s.crmOwner)&&(null==(h=Object.values(C.default.crmOwner))?void 0:h.map((function(e){return(0,d.jsx)("option",{value:e.id,children:e.full_name},e.id)})))]}),(0,d.jsx)("button",{onClick:function(){return(0,_.refreshOwners)(O,C,N,q,M)},className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":"'"+(0,r.__)("Refresh CRM Owners","bit-integrations")+"'"},type:"button",disabled:U,children:"↻"})]})]}),(0,d.jsx)(f.A,{md:!0,show:z,setModal:I,title:(0,r.__)("Upsert Record","bit-integrations"),children:(0,d.jsx)("div",{className:"o-a",children:0===D?(null==C||null==(p=C.actions)?void 0:p.upsert)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"font-w-m mt-2",children:(0,r.__)("Upsert Using","bit-integrations")}),(0,d.jsx)("small",{children:(0,r.__)("Arrange fields in order of preferance for upsertion","bit-integrations")}),(0,d.jsx)(n.ReactSortable,{list:null==(b=C.actions.upsert)?void 0:b.crmField,setList:function(e){return H(e,"list")},children:null==(v=C.actions.upsert)||null==(v=v.crmField)?void 0:v.map((function(e){return(0,d.jsxs)("div",{className:"upsert_rec w-7 mt-1 flx",children:[(0,d.jsx)("span",{className:"btcd-icn btcd-mnu mr-2"}),e.name]},"cf-"+e.i)}))}),(0,d.jsx)("div",{className:"font-w-m mt-3",children:(0,r.__)("Upsert Preferance","bit-integrations")}),(0,d.jsx)("small",{children:(0,r.__)("Overwrite existing field values in Zoho CRM with empty field values from Zoho CRM For WPForms while upserting a record?","bit-integrations")}),(0,d.jsxs)("div",{children:[(0,d.jsx)(c,{onChange:function(){return H(!0,"overwrite")},radio:!0,checked:null==(w=C.actions.upsert)?void 0:w.overwrite,name:"up-rec",title:(0,r.__)("Yes","bit-integrations")}),(0,d.jsx)(c,{onChange:function(){return H(!1,"overwrite")},radio:!0,checked:!(null!=(x=C.actions.upsert)&&x.overwrite),name:"up-rec",title:(0,r.__)("No","bit-integrations")})]})]}):(null==C||null==(k=C.relatedlists[D-1])||null==(k=k.actions)?void 0:k.upsert)&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"font-w-m mt-2",children:(0,r.__)("Upsert Using","bit-integrations")}),(0,d.jsx)("small",{children:(0,r.__)("Arrange fields in order of preferance for upsertion","bit-integrations")}),(0,d.jsx)(n.ReactSortable,{list:null==(y=C.relatedlists[D-1].actions.upsert)?void 0:y.crmField,setList:function(e){return H(e,"list")},children:null==(F=C.relatedlists[D-1].actions.upsert)||null==(F=F.crmField)?void 0:F.map((function(e){return(0,d.jsxs)("div",{className:"upsert_rec w-7 mt-1 flx",children:[(0,d.jsx)("span",{className:"btcd-icn btcd-mnu mr-2"}),e.name]},"cf-"+e.i)}))}),(0,d.jsx)("div",{className:"font-w-m mt-3",children:(0,r.__)("Upsert Preferance","bit-integrations")}),(0,d.jsx)("small",{children:(0,r.__)("Overwrite existing field values in Zoho CRM with empty field values from Zoho CRM For WPForms while upserting a record?","bit-integrations")}),(0,d.jsxs)("div",{children:[(0,d.jsx)(c,{onChange:function(){return H(!0,"overwrite")},radio:!0,checked:null==(j=C.relatedlists[D-1].actions.upsert)?void 0:j.overwrite,name:"up-rec",title:(0,r.__)("Yes","bit-integrations")}),(0,d.jsx)(c,{onChange:function(){return H(!1,"overwrite")},radio:!0,checked:!(null!=(A=C.relatedlists[D-1].actions.upsert)&&A.overwrite),name:"up-rec",title:(0,r.__)("No","bit-integrations")})]})]})})})]})}},9192:(e,t,s)=>{s.r(t),s.d(t,{checkMappedFields:()=>p,generateMappedField:()=>_,handleInput:()=>n,handleTabChange:()=>r,layoutChange:()=>d,moduleChange:()=>o,refreshAssigmentRules:()=>g,refreshLayouts:()=>u,refreshModules:()=>c,refreshOwners:()=>h,refreshRelatedList:()=>m,refreshTags:()=>f});var a=s(6325),l=s(7830),i=s(8496),n=function(e,t,s,l,i,n,r,c,u,m){var f=(0,a.A)({},s);if(0===t){if(c){var h=(0,a.A)({},u);h[e.target.name]="",m((0,a.A)({},h))}f[e.target.name]=e.target.value}else f.relatedlists||(f.relatedlists=[]),f.relatedlists[t-1][e.target.name]=e.target.value;switch(e.target.name){case"module":f=o(t,i,f,l,n,r);break;case"layout":f=d(t,i,f,l,n,r)}l((0,a.A)({},f))},r=function(e,t,s,a,l,i,n){var r;e&&((null==(r=a.default)||null==(r=r.relatedlists)||!r[a.module])&&m(s,a,l,i,n));t(e)},o=function(e,t,s,l,i,n){var r,o=(0,a.A)({},s),c=0===e?o.module:o.relatedlists[e-1].module;if(o.relatedlists[e-1]||(o.relatedlists[e-1]={}),0===e?(o.layout="",o.actions={},o.field_map=[{formField:"",zohoFormField:""}],o.upload_field_map=[{formField:"",zohoFormField:""}],o.relatedlists=[]):(o.relatedlists[e-1].layout="",o.relatedlists[e-1].actions={},o.relatedlists[e-1].field_map=[{formField:"",zohoFormField:""}],o.relatedlists[e-1].upload_field_map=[{formField:"",zohoFormField:""}]),null!=(r=o.default.layouts)&&r[c]){var m,f=Object.keys(null==(m=o.default.layouts)?void 0:m[c]);1===f.length&&(0===e?o.layout=f[0]:o.relatedlists[e-1].layout=f[0],o=d(e,t,o,l,i,n))}else u(e,t,o,l,i,n);return o},d=function(e,t,s,l,i,n){var r,o,d,c,u,m=(0,a.A)({},s),h=0===e?m.module:m.relatedlists[e-1].module,g=0===e?m.layout:m.relatedlists[e-1].layout;0===e?(m.actions={},m.field_map=null!=m&&null!=(o=m.default)&&null!=(o=o.layouts)&&null!=(o=o[h])&&null!=(o=o[g])&&o.required?_(e,m):[{formField:"",zohoFormField:""}],m.upload_field_map=null!=m&&null!=(d=m.default)&&null!=(d=d.layouts)&&null!=(d=d[h])&&null!=(d=d[g])&&d.requiredFileUploadFields&&Object.keys(m.default.layouts[h][g].requiredFileUploadFields).length>0?_(e,m,!0):[{formField:"",zohoFormField:""}]):(m.relatedlists[e-1].actions={},m.relatedlists[e-1].field_map=null!=m&&null!=(c=m.default)&&null!=(c=c.layouts)&&null!=(c=c[h])&&null!=(c=c[g])&&c.required?_(e,m):[{formField:"",zohoFormField:""}],m.relatedlists[e-1].upload_field_map=null!=m&&null!=(u=m.default)&&null!=(u=u.layouts)&&null!=(u=u[h])&&null!=(u=u[g])&&u.requiredFileUploadFields&&Object.keys(m.default.layouts[h][g].requiredFileUploadFields).length>0?_(e,m,!0):[{formField:"",zohoFormField:""}]);return(null==(r=m.default.tags)||!r[h])&&f(e,t,m,l,i,n),m},c=function(e,t,s,n,r){n(!0);var o={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,i.A)(o,"zcrm_refresh_modules").then((function(e){if(e&&e.success){var i=(0,a.A)({},t);i.default||(i.default={}),e.data.modules&&(i.default.modules=e.data.modules),e.data.tokenDetails&&(i.tokenDetails=e.data.tokenDetails),s((0,a.A)({},i)),r({show:!0,msg:(0,l.__)("Modules refreshed","bit-integrations")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:(0,l.n)((0,l.__)("Modules refresh failed Cause: %s. please try again","bit-integrations"),e.data.data||e.data)}):r({show:!0,msg:(0,l.__)("Modules refresh failed. please try again","bit-integrations")});n(!1)})).catch((function(){return n(!1)}))},u=function(e,t,s,n,r,o){var d=(0,a.A)({},s),c=0===e?d.module:d.relatedlists[e-1].module;if(c){r(!0);var u={formID:t,module:c,dataCenter:d.dataCenter,clientId:d.clientId,clientSecret:d.clientSecret,tokenDetails:d.tokenDetails};(0,i.A)(u,"zcrm_refresh_layouts").then((function(s){var i;if(s&&s.success){if(s.data.layouts){d.default.layouts||(d.default.layouts={}),d.default.layouts[c]=s.data.layouts;var u,m=[].concat(Object.keys(s.data.layouts));if(1===m.length)0===e?(d.layout=m[0],d.field_map=_(e,d),Object.keys(s.data.layouts[m].fileUploadFields).length>0&&(d.upload_field_map=_(e,d,!0))):(d.relatedlists[e-1].layout=m[0],d.relatedlists[e-1].field_map=_(e,d),Object.keys(s.data.layouts[m].fileUploadFields).length>0&&(d.relatedlists[e-1].upload_field_map=_(e,d,!0))),null!=(u=d.default.tags)&&u[c]||f(e,t,d,n,r,o)}s.data.tokenDetails&&(d.tokenDetails=s.data.tokenDetails),n((0,a.A)({},d)),o({show:!0,msg:(0,l.__)("Layouts refreshed","bit-integrations")})}else null!=s&&null!=(i=s.data)&&i.data||!s.success&&"string"===typeof s.data?o({show:!0,msg:(0,l.n)((0,l.__)("Layouts refresh failed Cause: %s. please try again","bit-integrations"),s.data.data||s.data)}):o({show:!0,msg:(0,l.__)("Layouts refresh failed. please try again","bit-integrations")});r(!1)})).catch((function(){return r(!1)}))}},m=function(e,t,s,n,r){if(t.module){n(!0);var o={formID:e,module:t.module,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,i.A)(o,"zcrm_get_related_lists").then((function(e){var i;if(e&&e.success){var o=(0,a.A)({},t);e.data.relatedLists&&(o.default.relatedlists||(o.default.relatedlists={}),o.default.relatedlists[o.module]=(0,a.A)({},e.data.relatedLists)),e.data.tokenDetails&&(o.tokenDetails=e.data.tokenDetails),s((0,a.A)({},o)),r({show:!0,msg:(0,l.__)("RelatedLists refreshed","bit-integrations")})}else null!=e&&null!=(i=e.data)&&i.data||!e.success&&"string"===typeof e.data?r({show:!0,msg:""+(0,l.__)("RelatedLists refresh failed Cause:")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bit-integrations")}):r({show:!0,msg:(0,l.__)("RelatedLists refresh failed. please try again","bit-integrations")});n(!1)})).catch((function(){return n(!1)}))}},f=function(e,t,s,n,r,o){var d=0===e?s.module:s.relatedlists[e-1].module;if(d){r(!0);var c={formID:t,module:d,dataCenter:s.dataCenter,clientId:s.clientId,clientSecret:s.clientSecret,tokenDetails:s.tokenDetails};(0,i.A)(c,"zcrm_get_tags").then((function(e){var t;if(null!=e&&e.success){var i=(0,a.A)({},s);e.data.tags&&(i.default.tags||(i.default.tags={}),i.default.tags[d]=(0,a.A)({},e.data.tags)),e.data.tokenDetails&&(i.tokenDetails=e.data.tokenDetails),n((0,a.A)({},i)),o({show:!0,msg:(0,l.__)("Tags refreshed","bit-integrations")})}else null!=e&&null!=(t=e.data)&&t.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:""+(0,l.__)("Tags refresh failed Cause:","bit-integrations")+(e.data.data||e.data)+". "+(0,l.__)("please try again","bit-integrations")}):o({show:!0,msg:(0,l.__)("Tags refresh failed. please try again","bit-integrations")});r(!1)})).catch((function(){return r(!1)}))}},h=function(e,t,s,n,r){n(!0);var o={formID:e,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,i.A)(o,"zcrm_get_users").then((function(e){if(null!=e&&e.success){var i=(0,a.A)({},t);i.default.crmOwner=e.data.users,e.data.tokenDetails&&(i.tokenDetails=e.data.tokenDetails),s((0,a.A)({},i)),r({show:!0,msg:(0,l.__)("Owners refreshed","bit-integrations")})}else r({show:!0,msg:(0,l.__)("Owners refresh failed. please try again","bit-integrations")});n(!1)})).catch((function(){return n(!1)}))},g=function(e,t,s,n,r){var o=0===e?t.module:t.relatedlists[e-1].module;if(o){n(!0);var d={module:o,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,i.A)(d,"zcrm_get_assignment_rules").then((function(e){if(null!=e&&e.success){var i=(0,a.A)({},t);i.default.assignmentRules||(i.default.assignmentRules={}),e.data.tokenDetails&&(i.tokenDetails=e.data.tokenDetails),i.default.assignmentRules[o]=(0,a.A)({},e.data.assignmentRules),s((0,a.A)({},i)),r({show:!0,msg:(0,l.__)("Assignment Rules refreshed","bit-integrations")})}else r({show:!0,msg:(0,l.__)("Assignment Rules refresh failed. please try again","bit-integrations")});n(!1)})).catch((function(){return n(!1)}))}},_=function(e,t,s){var a=0===e?t.module:t.relatedlists[e-1].module,l=0===e?t.layout:t.relatedlists[e-1].layout;return s?t.default.layouts[a][l].requiredFileUploadFields.length>0?t.default.layouts[a][l].requiredFileUploadFields.map((function(e){return{formField:"",zohoFormField:e}})):[{formField:"",zohoFormField:""}]:t.default.layouts[a][l].required.length>0?t.default.layouts[a][l].required.map((function(e){return{formField:"",zohoFormField:e}})):[{formField:"",zohoFormField:""}]},p=function(e){var t=null!=e&&e.field_map?e.field_map.filter((function(t){var s;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(s=e.default)||null==(s=s.layouts)||null==(s=s[e.module])||null==(s=s[e.layout])?void 0:s.required.indexOf(t.zohoFormField))})):[],s=null!=e&&e.upload_field_map?e.upload_field_map.filter((function(t){return!t.formField&&t.zohoFormField&&-1!==e.default.layouts[e.module][e.layout].requiredFileUploadFields.indexOf(t.zohoFormField)})):[],a=e.relatedlists.map((function(e){return e.field_map.filter((function(e){return!e.formField&&e.zohoFormField}))})),l=e.relatedlists.map((function(e){return e.upload_field_map.filter((function(e){return!e.formField&&e.zohoFormField}))}));return!(t.length>0||s.length>0||a.some((function(e){return e.length}))||l.some((function(e){return e.length})))}}}]);